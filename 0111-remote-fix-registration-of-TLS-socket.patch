From: Michael Chapman <mike@very.puzzling.org>
Date: Tue, 17 Sep 2019 17:03:57 +1000
Subject: [PATCH] remote: fix registration of TLS socket
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Reviewed-by: Daniel P. Berrang√© <berrange@redhat.com>
Signed-off-by: Michael Chapman <mike@very.puzzling.org>
(cherry picked from commit 522b3d2b24d0f7ac78dad442c990d4e34db0eaf2)
---
 src/remote/remote_daemon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/remote/remote_daemon.c b/src/remote/remote_daemon.c
index b7ee1cf49b..6b5a6c1523 100644
--- a/src/remote/remote_daemon.c
+++ b/src/remote/remote_daemon.c
@@ -473,7 +473,7 @@ daemonSetupNetworking(virNetServerPtr srv,
                                   config->max_client_requests) < 0)
         goto cleanup;
 
-    if (((ipsock && config->listen_tls) || (act && virSystemdActivationHasName(act, "ip-tls")))) {
+    if (((ipsock && config->listen_tls) || (act && virSystemdActivationHasName(act, "libvirtd-tls.socket")))) {
         virNetTLSContextPtr ctxt = NULL;
 
         if (config->ca_file ||
